<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUIX - Events</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar glass-panel"
        style="margin: 20px 0 20px 20px; height: calc(100vh - 40px); border-radius: 12px;">
        <div class="brand">
            <img src="assets/AUiX-Acronym-White-With-Accents-RGB.png" alt="AUIX" style="height: 50px; width: auto;">
        </div>

        <ul class="nav-menu">
            <a href="Dashboard.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                </svg>
                Dashboard
            </a>
            <a href="soldiers.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                </svg>
                Soldiers
            </a>
            <a href="analytics.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" />
                </svg>
                Analytics
            </a>
            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" />
                </svg>
                Reports
            </a>
            <a href="events.html" class="nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zm-7 5h5v5h-5z" />
                </svg>
                Events
            </a>
        </ul>

        <div class="sidebar-footer">
            <div class="footer-icons">
                <a href="#" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <path
                            d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.58 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
                    </svg>
                    Settings
                </a>
                <a href="login.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <path
                            d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                    </svg>
                    Logout
                </a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-board">
        <!-- Header -->
        <header class="board-header events-header">
            <div class="events-header-left">
                <h2 class="page-title">Events Management</h2>
                <div class="events-filters">
                    <select id="eventTypeFilter" class="filter-select">
                        <option value="all">All Types</option>
                        <option value="training">Training</option>
                        <option value="mission">Mission</option>
                        <option value="recovery">Recovery</option>
                        <option value="test">Physical Test</option>
                        <option value="admin">Admin</option>
                    </select>
                    <input type="month" id="monthFilter" class="filter-input" value="2026-01">
                </div>
            </div>
            <div class="events-header-right">
                <button class="btn-primary" onclick="openAddEventModal()">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                    Add Event
                </button>
                <div class="notification-container">
                    <svg class="notification-bell" viewBox="0 0 24 24" width="22" height="22" fill="none"
                        stroke="#9ca3af" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notification-badge">3</span>
                </div>
                <div class="user-profile-circle"></div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="detail-tabs events-tabs">
            <button class="detail-tab-btn active" onclick="switchEventTab('main')">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path
                        d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z" />
                </svg>
                Calendar & Timeline
            </button>
            <button class="detail-tab-btn" onclick="switchEventTab('impact')">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" />
                </svg>
                Impact Analysis
            </button>
        </div>

        <!-- Tab Content -->
        <div class="events-content">
            <!-- Main View: Calendar & Timeline Side-by-Side -->
            <div id="mainView" class="event-view active">
                <div class="events-split-layout">
                    <!-- Left Panel: Calendar (Swapped) -->
                    <div class="calendar-panel">
                        <div class="calendar-section">
                            <div class="calendar-controls">
                                <button class="calendar-nav-btn" onclick="previousMonth()">
                                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                                    </svg>
                                </button>
                                <h3 class="calendar-month" id="calendarMonth">January 2026</h3>
                                <button class="calendar-nav-btn" onclick="nextMonth()">
                                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                                    </svg>
                                </button>
                            </div>

                            <div class="calendar-container-compact" id="calendarGrid">
                                <!-- Calendar will be rendered by JS -->
                            </div>

                            <div class="event-legend">
                                <div class="legend-item">
                                    <span class="legend-dot event-training"></span>
                                    <span>Training</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-dot event-mission"></span>
                                    <span>Mission</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-dot event-recovery"></span>
                                    <span>Recovery</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-dot event-test"></span>
                                    <span>Test</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-dot event-admin"></span>
                                    <span>Admin</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel: Timeline (Swapped) -->
                    <div class="timeline-panel">
                        <div class="timeline-panel-header">
                            <h3>Event Timeline</h3>
                            <div class="timeline-controls">
                                <input type="text" id="timelineSearch" placeholder="Search events..."
                                    class="timeline-search-compact">
                                <select id="timelineSort" onchange="sortTimeline()" class="timeline-sort-select">
                                    <option value="date-desc">Newest First</option>
                                    <option value="date-asc">Oldest First</option>
                                    <option value="type">By Type</option>
                                </select>
                            </div>
                        </div>
                        <div class="timeline-container-split" id="timelineContainer">
                            <!-- Timeline items will be rendered by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Impact View -->
            <div id="impactView" class="event-view">
                <div class="impact-selector">
                    <label for="impactEventSelect">Select Event:</label>
                    <select id="impactEventSelect" onchange="loadEventImpact()">
                        <option value="">Choose an event...</option>
                    </select>
                </div>

                <div class="impact-content" id="impactContent">
                    <div class="impact-placeholder">
                        <svg viewBox="0 0 24 24" width="48" height="48" fill="currentColor" opacity="0.3">
                            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" />
                        </svg>
                        <p>Select an event to view its impact on metrics</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Event Details Modal -->
    <div id="eventDetailsModal" class="modal">
        <div class="modal-content event-modal">
            <div class="modal-header">
                <h3 id="modalEventTitle">Event Details</h3>
                <button class="modal-close" onclick="closeEventModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalEventBody">
                <!-- Event details will be populated by JS -->
            </div>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div id="addEventModal" class="modal">
        <div class="modal-content event-modal">
            <div class="modal-header">
                <h3>Add New Event</h3>
                <button class="modal-close" onclick="closeAddEventModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addEventForm" class="event-form">
                    <div class="form-group">
                        <label for="eventName">Event Name *</label>
                        <input type="text" id="eventName" required>
                    </div>
                    <div class="form-group">
                        <label for="eventType">Event Type *</label>
                        <select id="eventType" required>
                            <option value="training">Training</option>
                            <option value="mission">Mission</option>
                            <option value="recovery">Recovery</option>
                            <option value="test">Physical Test</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventDate">Date *</label>
                            <input type="date" id="eventDate" required>
                        </div>
                        <div class="form-group">
                            <label for="eventDuration">Duration (hours)</label>
                            <input type="number" id="eventDuration" min="0.5" step="0.5" value="2">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="affectedUnits">Affected Units</label>
                        <input type="text" id="affectedUnits" placeholder="e.g., Charlie Company, 1st Platoon">
                    </div>
                    <div class="form-group">
                        <label for="eventNotes">Notes</label>
                        <textarea id="eventNotes" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeAddEventModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Add Event</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="public/js/events.js"></script>
</body>

</html>