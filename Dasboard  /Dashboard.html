<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUIX - Unit Readiness Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="public/css/modals.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="public/js/auth.js" defer></script>
    <script src="public/js/dashboard.js" defer></script>
    <script src="public/js/dashboard-enhancements.js" defer></script>
    <script src="public/js/charts.js" defer></script>
    <script src="public/js/notifications.js" defer></script>
</head>

<body>

    <!-- Sidebar -->
    <aside class="sidebar glass-panel"
        style="margin: 20px 0 20px 20px; height: calc(100vh - 40px); border-radius: 12px;">
        <div class="brand">
            <img src="assets/AUiX-Acronym-White-With-Accents-RGB.png" alt="AUIX" style="height: 50px; width: auto;">
        </div>

        <ul class="nav-menu">
            <a href="Dashboard.html" class="nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                </svg>
                Dashboard
            </a>
            <a href="soldiers.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                </svg>
                Soldiers
            </a>
            <a href="analytics.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" />
                </svg>
                Analytics
            </a>
            <a href="#" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" />
                </svg>
                Reports
            </a>
            <a href="events.html" class="nav-item">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path
                        d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zm-7 5h5v5h-5z" />
                </svg>
                Events
            </a>
        </ul>

        <div class="sidebar-footer">
            <div class="footer-icons">
                <a href="#" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <path
                            d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.58 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
                    </svg>
                    Settings
                </a>
                <a href="login.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24">
                        <path
                            d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                    </svg>
                    Logout
                </a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-board main-board-fixed">

        <!-- Header -->
        <header class="board-header">
            <div class="board-title" style="display:flex; align-items:center;">
                <h2>UNIT READINESS DASHBOARD</h2>
            </div>
            <div class="header-actions">
                <!-- Notification Bell with Badge -->
                <div class="notification-container">
                    <svg class="notification-bell" viewBox="0 0 24 24" width="24" height="24" fill="none"
                        stroke="#9ca3af" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        onclick="toggleNotifications()">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notification-badge" id="notificationBadge">3</span>

                    <!-- Notifications Dropdown -->
                    <div class="notifications-dropdown" id="notificationsDropdown">
                        <div class="notifications-header">
                            <h3>Notifications</h3>
                            <button class="mark-all-read" onclick="markAllRead()">Mark all read</button>
                        </div>
                        <div class="notifications-list">
                            <div class="notification-item notification-high">
                                <div class="notification-dot"></div>
                                <div class="notification-content">
                                    <div class="notification-title">Medical Hold Expiring</div>
                                    <div class="notification-desc">SGT. Johnson - Medical clearance needed by Jan 15
                                    </div>
                                    <div class="notification-time">2 hours ago</div>
                                </div>
                            </div>
                            <div class="notification-item notification-medium">
                                <div class="notification-dot"></div>
                                <div class="notification-content">
                                    <div class="notification-title">PT Test Due</div>
                                    <div class="notification-desc">12 soldiers require PT testing this month</div>
                                    <div class="notification-time">5 hours ago</div>
                                </div>
                            </div>
                            <div class="notification-item notification-medium">
                                <div class="notification-dot"></div>
                                <div class="notification-content">
                                    <div class="notification-title">Training Expiration</div>
                                    <div class="notification-desc">CPL. Martinez - Weapons qual expires Jan 20</div>
                                    <div class="notification-time">1 day ago</div>
                                </div>
                            </div>
                        </div>
                        <div class="notifications-footer">
                            <a href="#" class="view-all-link">View all notifications</a>
                        </div>
                    </div>
                </div>
                <div class="user-profile-circle"></div>
            </div>
        </header>

        <!-- Dashboard Grid - 2x2 Layout -->
        <div class="dashboard-grid-2x2">

            <!-- Widget 1: Quick Stats Overview -->
            <div class="widget widget-stats">
                <div class="widget-header">Quick Stats Overview</div>
                <div class="quick-stats-grid">
                    <div class="stat-card stat-card-blue">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path fill="currentColor"
                                    d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalPersonnel">183</div>
                            <div class="stat-label">Total Personnel</div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-green">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="readyDeployment">120</div>
                            <div class="stat-label">Ready for Deployment</div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-orange">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path fill="currentColor"
                                    d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="medicalIssues">26</div>
                            <div class="stat-label">Medical Issues</div>
                        </div>
                    </div>
                    <div class="stat-card stat-card-red">
                        <div class="stat-icon">
                            <svg viewBox="0 0 24 24" width="32" height="32">
                                <path fill="currentColor"
                                    d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="sleepDebtDays">8</div>
                            <div class="stat-label">Sleep Debt Days</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Widget 2: Combined Readiness Dashboard -->
            <div class="widget widget-readiness">
                <div class="widget-header">Unit Readiness Status</div>
                <div class="readiness-combined">
                    <!-- Overall Readiness Gauge -->
                    <div class="readiness-gauge-section">
                        <div class="readiness-gauge-container">
                            <svg width="180" height="180" viewBox="0 0 200 200" class="gauge-svg">
                                <circle cx="100" cy="100" r="90" class="gauge-bg" stroke-dasharray="565"
                                    stroke-dashoffset="141" transform="rotate(135, 100, 100)" />
                                <circle cx="100" cy="100" r="90" class="gauge-progress" stroke-dasharray="565"
                                    stroke-dashoffset="230" transform="rotate(135, 100, 100)" />
                            </svg>
                            <div class="gauge-center-text">
                                <span class="gauge-value">62</span>
                                <span class="gauge-label">Overall<br>Readiness</span>
                            </div>
                        </div>
                    </div>

                    <!-- Deployment Breakdown -->
                    <div class="deployment-breakdown">
                        <h4>Deployment Status</h4>
                        <div class="status-bars">
                            <div class="status-bar-item">
                                <div class="status-bar-label">
                                    <span class="status-dot status-dot-green"></span>
                                    <span>Ready</span>
                                    <span class="status-count">120</span>
                                </div>
                                <div class="status-bar-bg">
                                    <div class="status-bar-fill status-bar-green" style="width: 65%;"></div>
                                </div>
                                <span class="status-percent">65%</span>
                            </div>
                            <div class="status-bar-item">
                                <div class="status-bar-label">
                                    <span class="status-dot status-dot-orange"></span>
                                    <span>At Risk</span>
                                    <span class="status-count">45</span>
                                </div>
                                <div class="status-bar-bg">
                                    <div class="status-bar-fill status-bar-orange" style="width: 25%;"></div>
                                </div>
                                <span class="status-percent">25%</span>
                            </div>
                            <div class="status-bar-item">
                                <div class="status-bar-label">
                                    <span class="status-dot status-dot-red"></span>
                                    <span>Not Ready</span>
                                    <span class="status-count">18</span>
                                </div>
                                <div class="status-bar-bg">
                                    <div class="status-bar-fill status-bar-red" style="width: 10%;"></div>
                                </div>
                                <span class="status-percent">10%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Widget 3: Physical Test Compliance -->
            <div class="widget widget-pt">
                <div class="widget-header">Wearable Readiness Signals</div>
                <div class="charts-split-row">
                    <div class="chart-box-small">
                        <div class="mini-chart-title">HRV vs Baseline <span style="float:right; color:#10b981;">+8%
                                <small>▲</small></span></div>
                        <svg width="100%" height="40" viewBox="0 0 100 40" preserveAspectRatio="none">
                            <defs>
                                <linearGradient id="gradBlue" x1="0" y1="0" x2="0" y2="1">
                                    <stop offset="0%" stop-color="#2563eb" stop-opacity="0.5" />
                                    <stop offset="100%" stop-color="#2563eb" stop-opacity="0" />
                                </linearGradient>
                            </defs>
                            <path d="M0 30 L 20 20 L 40 35 L 60 15 L 80 25 L 100 10 V 40 H 0 Z" fill="url(#gradBlue)" />
                            <path d="M0 30 L 20 20 L 40 35 L 60 15 L 80 25 L 100 10" fill="none" stroke="#60a5fa"
                                stroke-width="2" />
                        </svg>
                    </div>
                    <div class="chart-box-small">
                        <div class="mini-chart-title">Sleep Quality + Recovery <span
                                style="float:right; color:#10b981;">85%
                                <small>▲</small></span></div>
                        <svg width="100%" height="40" viewBox="0 0 100 40" preserveAspectRatio="none">
                            <defs>
                                <linearGradient id="gradGreen" x1="0" y1="0" x2="0" y2="1">
                                    <stop offset="0%" stop-color="#10b981" stop-opacity="0.5" />
                                    <stop offset="100%" stop-color="#10b981" stop-opacity="0" />
                                </linearGradient>
                            </defs>
                            <path d="M0 35 L 20 30 L 40 32 L 60 25 L 80 20 L 100 25 V 40 H 0 Z"
                                fill="url(#gradGreen)" />
                            <path d="M0 35 L 20 30 L 40 32 L 60 25 L 80 20 L 100 25" fill="none" stroke="#10b981"
                                stroke-width="2" />
                        </svg>
                    </div>
                </div>

                <div class="chart-box-wide">
                    <div class="mini-chart-title">READINESS TREND (30 DAYS)</div>
                    <svg width="100%" height="60" viewBox="0 0 200 60" preserveAspectRatio="none">
                        <defs>
                            <linearGradient id="gradTrend" x1="0" y1="0" x2="0" y2="1">
                                <stop offset="0%" stop-color="#06b6d4" stop-opacity="0.4" />
                                <stop offset="100%" stop-color="#06b6d4" stop-opacity="0" />
                            </linearGradient>
                        </defs>
                        <path d="M0 50 L 40 40 L 80 55 L 120 30 L 160 40 L 200 20 V 60 H 0 Z" fill="url(#gradTrend)" />
                        <path d="M0 50 L 40 40 L 80 55 L 120 30 L 160 40 L 200 20" fill="none" stroke="#06b6d4"
                            stroke-width="2" />
                    </svg>
                </div>
            </div>

            <!-- Widget 4: At-Risk Soldiers + Alerts -->
            <div class="widget widget-at-risk">
                <div class="widget-header">At-Risk Soldiers + Alerts</div>
                <div class="at-risk-list">
                    <!-- Soldier 1 -->
                    <div class="at-risk-item at-risk-high">
                        <div class="at-risk-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                            </svg>
                        </div>
                        <div class="at-risk-info">
                            <div class="at-risk-name">SGT. Johnson</div>
                            <div class="at-risk-reason">HRV 35% below baseline • 5 consecutive poor sleep days</div>
                        </div>
                        <div class="at-risk-badge badge-high">HIGH</div>
                    </div>

                    <!-- Soldier 2 -->
                    <div class="at-risk-item at-risk-medium">
                        <div class="at-risk-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                            </svg>
                        </div>
                        <div class="at-risk-info">
                            <div class="at-risk-name">CPL. Martinez</div>
                            <div class="at-risk-reason">Recovery score declining trend • High fatigue markers</div>
                        </div>
                        <div class="at-risk-badge badge-medium">MEDIUM</div>
                    </div>

                    <!-- Soldier 3 -->
                    <div class="at-risk-item at-risk-medium">
                        <div class="at-risk-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                            </svg>
                        </div>
                        <div class="at-risk-info">
                            <div class="at-risk-name">PFC. Davis</div>
                            <div class="at-risk-reason">Elevated resting heart rate • Sleep debt: 12 hours</div>
                        </div>
                        <div class="at-risk-badge badge-medium">MEDIUM</div>
                    </div>

                    <!-- Soldier 4 -->
                    <div class="at-risk-item at-risk-high">
                        <div class="at-risk-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                            </svg>
                        </div>
                        <div class="at-risk-info">
                            <div class="at-risk-name">SPC. Thompson</div>
                            <div class="at-risk-reason">HRV variability increased • Consistent low recovery</div>
                        </div>
                        <div class="at-risk-badge badge-high">HIGH</div>
                    </div>

                    <!-- Soldier 5 -->
                    <div class="at-risk-item at-risk-medium">
                        <div class="at-risk-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                            </svg>
                        </div>
                        <div class="at-risk-info">
                            <div class="at-risk-name">SGT. Williams</div>
                            <div class="at-risk-reason">Sleep quality 45% • Missing wearable data last 2 days</div>
                        </div>
                        <div class="at-risk-badge badge-medium">MEDIUM</div>
                    </div>
                </div>
            </div>

        </div>
    </main>

</body>

</html>